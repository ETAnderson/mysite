{% extends 'base.html' %} 

{% block topbar %}

<div id='topbar'>
  <a href="{% url 'home' %}">Eric's Interactive Portfolio</a>
  <div id='dropdown'>
      <button class='dropbtn' onclick="projectDropDown()">Projects  <i class="fa fa-caret-down"></i></button>
      <div class='dropdown_container' id='myDropdown'>
        <ul>
          <li><a href="/blogs/"">Blogs</a></li>
          <li><a href='/polls/'>Polls</a></li>
          <li><a href=''>Future Project Placeholder</a></li>
        </ul> 
      </div>
  </div>
  <a href='mailto:anderson.eric.t@gmail.com'> Contact via email</a>
  <a href="https://github.com/ETAnderson">Eric on Github</a>
</div>

<script>
  function projectDropDown() {
      
    document.getElementById("myDropdown").classList.toggle("show");
  }
  
  window.onclick = function(e) {
    if (!e.target.matches('.dropbtn')) {
    var myDropdown = document.getElementById("myDropdown");
      if (myDropdown.classList.contains('show')) {
        myDropdown.classList.remove('show');
      }
    }
  }
</script>

{% endblock topbar %}

{% block content %}

<div class="comments">
  <h1>{% block title %} {{ post.title }} {% endblock title %}</h1>
  <p>{{ post.author }} | {{ post.created_on }}</p>
  <p>{{ post.content | safe }}</p>

  <div class="comment_block">
      <!-- comments -->
      <h2>{{ comments.count }} comments</h2>

      {% for comment in comments %}
      <div class="comments">
        <p>
          {{ comment.name }}
          <span>
            {{ comment.created_on }}
          </span>
        </p>
        {{ comment.body | linebreaks }}
      </div>

      {% endfor %}
  </div>

    <div class="card-body">
      {% if new_comment %}
      <div class="alert alert-success" role="alert">
        Your comment is awaiting moderation
      </div>
      {% else %}
      <h3>Leave a comment</h3>
      <form method="post">
        {{ comment_form.as_p }}
        {% csrf_token %}
        <button class='submit_btn' type="submit">Submit</button>
      </form>
      {% endif %}
    </div>
</div>
{% endblock content %}
